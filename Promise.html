<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script>
        //http://stackoverflow.com/questions/22519784/how-do-i-convert-an-existing-callback-api-to-promises

        window.onload = function () {

            jsonFlickrApiAsync().then(function (result) {
                console.info("in resolve", result);
            });

            console.info("loading the JSONP");
            loadJsonP("https://api.flickr.com/services/rest/?method=flickr.test.echo&api_key=1e4a63d700064d6eba2bca1aeefdd842&format=json&method=a");
            loadJsonP("https://api.flickr.com/services/rest/?method=flickr.test.echo&api_key=1e4a63d700064d6eba2bca1aeefdd842&format=json&method=b");
        };

        var loadJsonP = function (url) {
            var scr = document.createElement("script");
            scr.setAttribute("src", url);
            scr.setAttribute("onerror", function (e) {
                console.log(e);
            })
            document.documentElement.firstElementChild.appendChild(scr);
        }

        function jsonFlickrApiAsync() {
            console.info("building the promise");
            return new Promise(function (resolve, reject) {
                console.info("in 'new Promise'");
                window['jsonFlickrApi'] = resolve;
            })
        }


    </script>
</head>
<body>

</body>
</html>